---
slug: 53d993623cff58870566e9b5
title: linux下使用upstart配置redis为服务
tags: [redis ,linux ,upstart]
---

 &nbsp; &nbsp; &nbsp; 关于 upstart 的学习，可以在这里找到 [http://blog.fens.me/linux-upstart/][0]

 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 首先，我们需要知道的是，启动 redis 服务的命令，切换到 redis 目录中

 &nbsp; &nbsp; &nbsp; Cd /opt/redis

 &nbsp; &nbsp; &nbsp; ./src/redis-server –redis.conf 这样就启动了服务，但是在命令行中直接这样启动的话，如果关掉命令行，那么 redis 的进程就关闭了。所以需要 upstart ，其实也就是写个脚本。

 &nbsp; &nbsp; &nbsp; 在 /etc/init/ 目录下执行 vim redis.conf 这时进入了一个临时文件，名称就是 redis.conf

 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

 &nbsp; &nbsp; &nbsp; &nbsp;================ 脚本开始 ==============

 description "redis"&nbsp; # 描述信息

 author "yjx"

 &nbsp;

 start on startup&nbsp;&nbsp; #start on ：事件，启动任务

 stop on shutdown&nbsp; #stop on ：事件，停止任务

 &nbsp;

 respawn&nbsp;&nbsp; # 设置服务异常停止后自动重启

 &nbsp;

 script&nbsp;&nbsp;&nbsp; # 脚本执行的部分

 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; logger "========================&gt; redis server start"

 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cd /opt/redis/

 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; exec ./src/redis-server redis.conf

 &nbsp;

 end script

 &nbsp;

 pre-start script

 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; echo "Server starting..."

 end script

 &nbsp;

 pre-stop script

 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; echo "Server is stopping..."

 end script

 ============= 脚本结束 =================

&nbsp; &nbsp; &nbsp; &nbsp;Esc退出输入模式，shift+; 输入wq保存退出。

[0]: http://blog.fens.me/linux-upstart/
