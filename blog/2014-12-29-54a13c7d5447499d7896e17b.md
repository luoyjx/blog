---
slug: 54a13c7d5447499d7896e17b
title: js中一个属性引发的血案
tags: [javascript]
---

 &nbsp; &nbsp; 今天在@alsotang的博客中看到一段话，是说在判断admin用户的时候，使用a[b]这种做法是有个漏洞的。 

&nbsp; &nbsp; 原文如下: 

> &nbsp;&nbsp;&nbsp;&nbsp;有一次，在其中的一个项目中，我注册了一个用户，名叫 constructor ，于是我就成了 admin。这是因为，每个对象，都有它的 constructor 属性。而如果 JS 中有 Hash 类型存在的话，这个漏洞就不会发生。当然，后来这些 config.admins[username] 都改成了 config.admins.hasOwnProperty(username) 判断，终止了这个漏洞（不过后来据 @fengmk2 说，还是不保险。但他最近一排时间一直忙结婚，没有给我回复）。 

&nbsp; &nbsp; 原文在[《JavaScript之美》][0]中的Hash-style Object片段。 

&nbsp;&nbsp;&nbsp;&nbsp; 

&nbsp; &nbsp; 做个笔记，记住那些年大神踩过的坑。 

[0]: http://fxck.it/post/72326363595
