---
slug: 55fac2412b71fbda28fdcaf4
title: 支付宝和微信支付一点感想(9.18更新)
tags: [alipay ,微信支付]
---

两边肯定是都有开发文档的，只要签约了之后都会拿到相应的秘钥之类的。

感觉把，支付宝的文档还是比较详细的，而且他们做的事不用说还是比较多的。

举例，支付宝的可以点击按钮跳过去付款再用你给的return\_url跳到你的系统过去，或者是加个参数，变成扫码支付，扫完之后付款然后再跳转页面，可以说基本你按他的文档把参数拼接好了之后基本不需要多操心了，而且回调也是query parameter的方式，比较好解析。

微信，我用的扫码支付二（这种扫码直接支付的），感觉挺麻烦的。
首先，交互采用的xml的方式，对于node.js来说不是很友好，发送的时候要拼接一次，接收的时候要解析一次，而且，只是返回一个地址，还要自己生成二维码，扫了之后也没有后续操作了。

我看那个扫码支付模式一台麻烦就没弄，有时间再看看。

唉，不过没办法，两种都要接。

----

### 9.18

相当坑，微信支付的notify\_url也就是异步的通知接口，必须你这边的地址是走https协议的，所以我放弃了。

只能在微信支付的页面的跳转按钮做手脚了，大致步骤如下：

1. 扫码后，点击跳转到我的订单，实际上我在中间加了一层
2. 通过查询接口去查询订单的情况，根据结果来更新你的订单信息
3. 再跳转到订单列表去

暂时没想到更好的解决方案了，看到过别人有说轮训，对我来说好像不大好实现
